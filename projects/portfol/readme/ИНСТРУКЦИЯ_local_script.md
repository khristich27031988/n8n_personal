# Инструкция по запуску проекта автоматизации аналитики бизнеса

## Обзор проекта

Данный проект представляет собой систему для автоматизации анализа бизнес-данных с использованием n8n, Streamlit и LLM (Qwen API). Система позволяет:

- Загружать и анализировать CSV файлы с данными
- Автоматически генерировать скрипты обработки данных на основе анализа LLM
- Визуализировать данные с помощью различных графиков и диаграмм
- Получать бизнес-инсайты и рекомендации на основе данных
- Задавать вопросы к данным в формате чата

## Предварительные требования

Для работы с проектом вам потребуется:

1. Docker и Docker Compose
2. Python 3.8 или выше (если вы хотите запустить приложение без Docker)
3. API ключ для Qwen или другой LLM-модели

## Структура проекта

```
/portfol/
├── data/                   # Директория для хранения данных
│   ├── raw/                # Исходные CSV файлы
│   ├── analyzed/           # Результаты анализа LLM
│   └── processed/          # Обработанные данные
├── db/                     # База данных SQLite
├── docker/                 # Файлы Docker
│   └── streamlit/          # Dockerfile для Streamlit
├── scripts/                # Python скрипты
│   ├── llm_analyzer.py     # Скрипт для анализа CSV через LLM
│   ├── script_generator.py # Генератор скриптов обработки
│   └── data_processor.py   # Выполнение сгенерированных скриптов
├── streamlit_app/          # Приложение Streamlit
│   ├── app.py              # Основное приложение
│   ├── pages/              # Дополнительные страницы
│   └── components/         # Компоненты UI
├── .env                    # Файл с переменными окружения
├── docker-compose.yml      # Файл для оркестрации контейнеров
└── README.md               # Документация проекта
```

## Настройка проекта

### Шаг 1: Настройка переменных окружения

1. Откройте файл `.env` и укажите ваш API ключ для Qwen:

```
QWEN_API_KEY=your_qwen_api_key_here
```

### Шаг 2: Запуск проекта с помощью Docker

1. Откройте терминал и перейдите в директорию проекта:

```bash
cd /portfol
```

2. Запустите контейнеры с помощью Docker Compose:

```bash
docker-compose up -d
```

3. Откройте Streamlit-приложение в браузере по адресу:

```
http://localhost:8501
```

### Шаг 3: Запуск проекта без Docker (альтернативный вариант)

1. Создайте и активируйте виртуальное окружение Python:

```bash
cd /portfol
python -m venv venv
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate     # для Windows
```

2. Установите необходимые зависимости:

```bash
pip install -r requirements.txt
```

3. Запустите Streamlit-приложение:

```bash
streamlit run streamlit_app/app.py
```

4. Откройте приложение в браузере по адресу:

```
http://localhost:8501
```

## Использование проекта

### Анализ данных

1. В проекте уже есть пример данных о продажах в файле `/portfol/data/raw/sample_sales_data.csv`.
2. Откройте приложение Streamlit и перейдите на страницу "Загрузка данных".
3. Выберите вкладку "Просмотр загруженных файлов" и выберите файл `sample_sales_data.csv`.
4. Перейдите на страницу "Анализ данных" и выберите файл для анализа.
5. Нажмите кнопку "Запустить анализ с помощью LLM".
6. После завершения анализа нажмите кнопку "Сгенерировать скрипт обработки".

### Обработка данных

1. Перейдите на страницу "Обработка данных".
2. Выберите сгенерированный скрипт обработки.
3. Нажмите кнопку "Запустить обработку".
4. После завершения обработки вы можете просмотреть результаты на вкладке "Результаты обработки" или "База данных".

### Визуализация данных

1. Перейдите на страницу "Визуализация".
2. Выберите таблицу для визуализации.
3. Выберите тип графика и настройте параметры.
4. Исследуйте данные с помощью различных визуализаций.

### Получение инсайтов

1. Перейдите на страницу "Инсайты".
2. Выберите таблицу для анализа.
3. Нажмите кнопку "Получить инсайты" для получения бизнес-инсайтов и рекомендаций.
4. Используйте вкладку "Чат с данными" для задания вопросов к данным.

## Интеграция с n8n

Проект интегрируется с существующим n8n сервером для автоматизации рабочих процессов. Для настройки интеграции:

1. Убедитесь, что n8n сервер запущен и доступен.
2. В n8n создайте новый рабочий процесс для автоматизации загрузки и анализа данных.
3. Используйте HTTP Request ноды для взаимодействия со Streamlit-приложением.

## Устранение неполадок

### Проблемы с API ключом

Если вы видите ошибки, связанные с API ключом, убедитесь, что:
- Вы указали правильный API ключ в файле `.env`
- API ключ активен и имеет достаточно кредитов

### Проблемы с Docker

Если у вас возникают проблемы с запуском контейнеров:
- Проверьте логи контейнеров: `docker-compose logs`
- Убедитесь, что порты 8501 не заняты другими приложениями

### Проблемы с Streamlit

Если Streamlit-приложение не запускается:
- Проверьте, что все зависимости установлены: `pip install -r requirements.txt`
- Проверьте логи Streamlit: `streamlit run streamlit_app/app.py --log_level=debug`

## Дополнительная информация

Для получения дополнительной информации о проекте обратитесь к файлу README.md или свяжитесь с разработчиком.
